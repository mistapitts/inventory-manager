<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Inventory Manager" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#0f0f23" />
    <meta name="msapplication-TileColor" content="#0f0f23" />
    <title>Inventory Manager - Login</title>
    <link rel="stylesheet" href="/styles.css?v=oos-ui-2" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <!-- Login Form -->
      <div class="login-container" id="loginContainer">
        <div class="login-header">
          <div class="logo">
            <i class="fas fa-clipboard-list"></i>
            <h1>Randy's Inventory Manager</h1>
          </div>
          <p class="subtitle">Professional Inventory & Calibration Management</p>
        </div>

        <form class="login-form" id="loginForm">
          <div class="form-group">
            <label for="email">Email Address</label>
            <div class="input-wrapper">
              <i class="fas fa-envelope"></i>
              <input type="email" id="email" name="email" required placeholder="Enter your email" />
            </div>
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <div class="input-wrapper">
              <i class="fas fa-lock"></i>
              <input
                type="password"
                id="password"
                name="password"
                required
                placeholder="Enter your password"
              />
              <button type="button" class="toggle-password" id="togglePassword">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <div class="form-options">
            <label class="checkbox-wrapper">
              <input type="checkbox" id="rememberMe" />
              <span class="checkmark"></span>
              Stay logged in
            </label>
          </div>

          <button type="submit" class="login-btn">
            <span class="btn-text">Sign In</span>
            <div class="btn-loader" style="display: none">
              <div class="spinner"></div>
            </div>
          </button>
        </form>

        <div class="login-footer">
          <p>Don't have an account? <a href="#" id="showRegister">Get an invite code</a></p>
          <p class="support-link">
            <a href="#"><i class="fas fa-question-circle"></i> Need help?</a>
          </p>
        </div>
      </div>

      <!-- Registration Form -->
      <div class="register-container" id="registerContainer" style="display: none">
        <div class="register-header">
          <button class="back-btn" id="backToLogin">
            <i class="fas fa-arrow-left"></i> Back to Login
          </button>
          <h2>Create Account</h2>
          <p>Enter your invite code to join your company</p>
        </div>

        <form class="register-form" id="registerForm">
          <div class="form-group">
            <label for="regEmail">Email Address</label>
            <div class="input-wrapper">
              <i class="fas fa-envelope"></i>
              <input
                type="email"
                id="regEmail"
                name="email"
                required
                placeholder="Enter your email"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="firstName">First Name</label>
            <div class="input-wrapper">
              <i class="fas fa-user"></i>
              <input
                type="text"
                id="firstName"
                name="firstName"
                required
                placeholder="Enter your first name"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="lastName">Last Name</label>
            <div class="input-wrapper">
              <i class="fas fa-user"></i>
              <input
                type="text"
                id="lastName"
                name="lastName"
                required
                placeholder="Enter your last name"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="inviteCode">Invite Code</label>
            <div class="input-wrapper">
              <i class="fas fa-key"></i>
              <input
                type="text"
                id="inviteCode"
                name="inviteCode"
                required
                placeholder="Enter your company invite code"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="regPassword">Password</label>
            <div class="input-wrapper">
              <i class="fas fa-lock"></i>
              <input
                type="password"
                id="regPassword"
                name="password"
                required
                placeholder="Create a password"
              />
              <button type="button" class="toggle-password" id="toggleRegPassword">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <button type="submit" class="register-btn">
            <span class="btn-text">Create Account</span>
            <div class="btn-loader" style="display: none">
              <div class="spinner"></div>
            </div>
          </button>
        </form>
      </div>

      <!-- Dashboard (hidden until login) -->
      <div class="dashboard" id="dashboard" style="display: none">
        <nav class="sidebar">
          <div class="sidebar-header">
            <div class="logo">
              <i class="fas fa-clipboard-list"></i>
              <span>Randy's Inventory Manager</span>
            </div>
          </div>

          <ul class="nav-menu">
            <li class="nav-item active">
              <a href="#inventory" class="nav-link">
                <i class="fas fa-boxes"></i>
                <span>Inventory</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="#calendar" class="nav-link">
                <i class="fas fa-calendar-alt"></i>
                <span>Calendar</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="#reports" class="nav-link">
                <i class="fas fa-chart-bar"></i>
                <span>Reports</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="#settings" class="nav-link">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="#support" class="nav-link">
                <i class="fas fa-question-circle"></i>
                <span>Support</span>
              </a>
            </li>
          </ul>

          <div class="sidebar-footer">
            <div class="user-info">
              <div class="user-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="user-details">
                <span class="user-name" id="userName">Admin User</span>
                <span class="user-role" id="userRole">Administrator</span>
              </div>
            </div>
            <button class="logout-btn" id="logoutBtn">
              <i class="fas fa-sign-out-alt"></i>
            </button>
          </div>
        </nav>

        <main class="main-content">
          <header class="top-bar">
            <div class="breadcrumb">
              <span>Inventory</span>
            </div>
            <div class="top-actions">
              <button class="add-item-btn" id="addItemBtn">
                <i class="fas fa-plus"></i>
                Add Item
              </button>
              <button class="btn btn-primary" id="createListBtn">
                <i class="fas fa-list"></i>
                Create List
              </button>
              <div class="search-box">
                <i class="fas fa-search"></i>
                <label for="searchInventory" class="visually-hidden">Search inventory</label>
                <input
                  type="text"
                  id="searchInventory"
                  name="searchInventory"
                  placeholder="Search inventory..."
                  autocomplete="off"
                />
              </div>
            </div>
          </header>

          <div class="content-area">
            <!-- Welcome Message (shown when no items) -->
            <div class="welcome-message" id="welcomeMessage">
              <h2>Welcome to Randy's Inventory Manager</h2>
              <p>
                Your inventory dashboard is ready. Start by setting up your company, then add your
                first item.
              </p>
              <button id="setupCompanyBtn" class="btn btn-primary">
                <i class="fas fa-building"></i> Setup Demo Company
              </button>
              <button
                id="createFirstListBtn"
                class="btn btn-secondary"
                style="display: none; margin-left: 12px"
              >
                <i class="fas fa-list"></i> Create First List
              </button>
            </div>

            <!-- Quick Stats -->
            <div class="quick-stats">
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-boxes"></i>
                </div>
                <div class="stat-content">
                  <h3 id="totalItems">0</h3>
                  <p>Total Items</p>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-calendar-check"></i>
                </div>
                <div class="stat-content">
                  <h3 id="dueThisMonth">0</h3>
                  <p>Due This Month</p>
                </div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <i class="fas fa-tools"></i>
                </div>
                <div class="stat-content">
                  <h3 id="maintenanceDue">0</h3>
                  <p>Maintenance Due</p>
                </div>
              </div>
            </div>

            <!-- Inventory List (shown when items exist) -->
            <div class="inventory-section" id="inventorySection" style="display: none">
              <!-- Main content area with legend on the right -->
              <div class="inventory-content-wrapper">
                <!-- Left side content -->
                <div class="inventory-main-content">
                  <div class="list-controls">
                    <button
                      class="btn btn-secondary"
                      id="migrateToFieldBtn"
                      onclick="migrateItemsToFieldList()"
                      style="display: none"
                    >
                      <i class="fas fa-arrow-right"></i> Migrate to Field
                    </button>
                  </div>
                </div>

                <!-- Legend positioned on the right side -->
                <div class="inventory-legend" id="inventoryLegend">

                  <div class="legend-lists-section">
                    <h4>List Colors</h4>
                    <div class="legend-lists" id="legendLists"></div>
                  </div>
                </div>
              </div>

              <div class="inventory-main-content">
                <div class="inventory-table-container">
                  <!-- Fixed toolbar (never scrolls) -->
                  <div class="inventory-table-header">
                    <h3 class="inventory-table-title">Inventory</h3>
                    <div class="table-header-controls">
                      <div class="column-customizer">
                        <button
                          class="column-customizer-btn"
                          id="columnCustomizerBtn"
                          title="Edit Lists and Columns"
                        >
                          <i class="fas fa-columns"></i> Edit Lists and Columns
                        </button>
                        <div class="column-customizer-menu" id="columnCustomizerMenu">
                          <!-- Lists Section -->
                          <div class="column-customizer-header">
                            <h4>Lists</h4>
                            <button class="reset-columns-btn" id="listsShowAllBtn">Show All</button>
                          </div>
                          <div class="list-options" id="listOptions"></div>
                          <div class="menu-footer">
                            <button class="reset-columns-btn" id="addListInlineBtn">
                              + Add List
                            </button>
                          </div>

                          <!-- Columns Section -->
                          <div class="column-customizer-header">
                            <h4>Visible Columns</h4>
                            <button class="reset-columns-btn" onclick="resetColumnVisibility()">
                              Reset All
                            </button>
                          </div>
                          <div class="column-options">
                            <label class="column-option">
                              <input type="checkbox" data-column="itemType" checked /> Item Type
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="nickname" checked /> Nickname
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="labId" checked /> Lab ID
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="make" checked /> Make
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="model" checked /> Model
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="serialNumber" checked /> Serial #
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="condition" checked /> Condition
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="dateReceived" checked /> Date
                              Received
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="datePlacedInService" checked /> In
                              Service
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="location" checked /> Location
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="calibrationType" checked /> Cal
                              Type
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="calibrationDate" checked /> Last
                              Cal
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="nextCalibrationDue" checked />
                              Next Cal Due
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="calibrationInterval" checked />
                              Cal Interval
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="calibrationMethod" checked /> Cal
                              Method/Company
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="maintenanceDate" checked /> Last
                              Maintenance
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="maintenanceDue" checked />
                              Maintenance Due
                            </label>
                            <label class="column-option">
                              <input type="checkbox" data-column="notes" checked /> Notes
                            </label>
                          </div>

                          <!-- OOS Visibility Section -->
                          <div class="column-customizer-header">
                            <h4>Out of Service</h4>
                          </div>
                          <div class="mt-3" id="oos-visibility-block">
                            <label class="column-option">
                              <input type="checkbox" id="drawerShowOOS" checked />
                              Show Out of Service items
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Only this part scrolls -->
                  <div class="inventory-table-scroll-wrapper">
                    <table class="inventory-table" id="inventoryTable">
                      <thead>
                        <tr>
                          <th class="sortable" data-sort="itemType">
                            Item Type <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="nickname">
                            Nickname <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="labId">
                            Lab ID <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="make">
                            Make <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="model">
                            Model <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="serialNumber">
                            Serial # <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="condition">
                            Condition <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="dateReceived">
                            Date Received <i class="fas fa-sort"></i>
                          </th>

                          <th class="sortable" data-sort="location">
                            Location <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="calibrationType">
                            Cal Type <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="calibrationDate">
                            Last Cal <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="nextCalibrationDue">
                            Next Cal Due <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="calibrationInterval">
                            Cal Interval <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="calibrationMethod">
                            Cal Method/Company <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="maintenanceDate">
                            Last Maintenance <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="maintenanceDue">
                            Maintenance Due <i class="fas fa-sort"></i>
                          </th>
                          <th class="sortable" data-sort="notes">
                            Notes <i class="fas fa-sort"></i>
                          </th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody id="inventoryTableBody">
                        <!-- Inventory items will be populated here -->
                      </tbody>
                    </table>
                  </div>
                  <!-- Close inventory-table-scroll-wrapper -->
                </div>
              </div>
            </div>
            <!-- Close inventory-main-content -->

            <!-- Calendar Section (hidden until calendar nav is selected) -->
            <div class="calendar-section" id="calendarSection" style="display: none"></div>
          </div>
        </main>
      </div>
    </div>

    <!-- Notification Toast -->
    <div class="toast" id="toast"></div>

    <!-- Add Item Modal -->
    <div class="modal-overlay" id="addItemModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Add New Inventory Item</h2>
          <button class="modal-close" id="closeAddItemModal">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <form class="add-item-form" id="addItemForm">
          <div class="form-sections">
            <!-- Basic Information -->
            <div class="form-section">
              <h3>Basic Information</h3>
              <div class="form-row">
                <div class="form-group">
                  <label for="itemType">Item Type *</label>
                  <input
                    type="text"
                    id="itemType"
                    name="itemType"
                    required
                    placeholder="e.g., Scale, Caliper, Vibration Analyzer"
                  />
                </div>
                <div class="form-group">
                  <label for="nickname">Nickname</label>
                  <input
                    type="text"
                    id="nickname"
                    name="nickname"
                    placeholder="e.g., Main Lab Scale"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="listId">List</label>
                  <select id="listId" name="listId">
                    <option value="">No lists available</option>
                  </select>
                  <button
                    type="button"
                    id="createListFromForm"
                    class="btn-secondary"
                    style="margin-top: 8px; display: none"
                  >
                    <i class="fas fa-plus"></i> Create New List
                  </button>
                </div>
                <div class="form-group">
                  <!-- spacer -->
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="labId">Lab ID/Number</label>
                  <input type="text" id="labId" name="labId" placeholder="e.g., LAB-001" />
                </div>
                <div class="form-group">
                  <label for="make">Make *</label>
                  <input
                    type="text"
                    id="make"
                    name="make"
                    required
                    placeholder="e.g., Mettler Toledo"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="model">Model *</label>
                  <input type="text" id="model" name="model" required placeholder="e.g., XS205" />
                </div>
                <div class="form-group">
                  <label for="serialNumber">Serial Number *</label>
                  <input
                    type="text"
                    id="serialNumber"
                    name="serialNumber"
                    required
                    placeholder="e.g., SN123456"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="condition">Condition When Received *</label>
                  <select id="condition" name="condition" required>
                    <option value="">Select Condition</option>
                    <option value="new">New</option>
                    <option value="used">Used</option>
                    <option value="refurbished">Refurbished</option>
                  </select>
                </div>
                <div class="form-group">
                  <!-- Empty div for spacing -->
                </div>
              </div>
            </div>

            <!-- Dates and Location -->
            <div class="form-section">
              <h3>Dates and Location</h3>
              <div class="form-row">
                <div class="form-group">
                  <label for="dateReceived">Date Received *</label>
                  <input type="date" id="dateReceived" name="dateReceived" required />
                </div>
                <div class="form-group">
                  <label for="datePlacedInService">Date Placed in Service *</label>
                  <input type="date" id="datePlacedInService" name="datePlacedInService" required />
                </div>
              </div>

              <div class="form-group">
                <label for="location">Location *</label>
                <input
                  type="text"
                  id="location"
                  name="location"
                  required
                  placeholder="e.g., Main Lab, Field Truck #1, Lab 3 - Bench 2"
                />
              </div>
            </div>

            <!-- Calibration Information -->
            <div class="form-section">
              <h3>Calibration Information</h3>
              <div class="form-row">
                <div class="form-group">
                  <label for="calibrationType">Calibration Type *</label>
                  <select id="calibrationType" name="calibrationType" required>
                    <option value="">Select Type</option>
                    <option value="in_house">In-House</option>
                    <option value="outsourced">Outsourced</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="calibrationDate">Last Calibration Date *</label>
                  <input type="date" id="calibrationDate" name="calibrationDate" required />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="nextCalibrationDue">Next Calibration Due *</label>
                  <input type="date" id="nextCalibrationDue" name="nextCalibrationDue" required />
                </div>
                <div class="form-group">
                  <label for="calibrationInterval">Calibration Interval *</label>
                  <div class="interval-input">
                    <input
                      type="number"
                      id="calibrationInterval"
                      name="calibrationInterval"
                      required
                      min="1"
                      max="365"
                      value="12"
                    />
                    <select id="calibrationIntervalType" name="calibrationIntervalType" required>
                      <option value="days">Days</option>
                      <option value="weeks">Weeks</option>
                      <option value="months" selected>Months</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="calibrationMethod" id="calibrationMethodLabel"
                  >Calibration Method *</label
                >
                <input
                  type="text"
                  id="calibrationMethod"
                  name="calibrationMethod"
                  required
                  placeholder="e.g., ASTM D4753"
                />
              </div>

              <!-- Calibration Files -->
              <div class="file-upload-section">
                <label>Calibration Files</label>
                <div class="file-upload-group">
                  <div class="file-upload">
                    <label for="calibrationTemplate">Calibration Template</label>
                    <input
                      type="file"
                      id="calibrationTemplate"
                      name="calibrationTemplate"
                      accept=".pdf,.doc,.docx,.xls,.xlsx"
                    />
                    <span class="file-info">Upload template form</span>
                  </div>
                  <div class="file-upload">
                    <label for="calibrationInstructions">Calibration Instructions</label>
                    <input
                      type="file"
                      id="calibrationInstructions"
                      name="calibrationInstructions"
                      accept=".pdf,.doc,.docx,.xls,.xlsx"
                    />
                    <span class="file-info">Upload procedure</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Maintenance Information -->
            <div class="form-section">
              <h3>Maintenance Information</h3>
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="useMaintenance" name="useMaintenance" />
                  <span class="checkmark"></span>
                  Include maintenance tracking for this item
                </label>
              </div>

              <div id="maintenanceFields" style="display: none">
                <div class="form-row">
                  <div class="form-group">
                    <label for="maintenanceDate">Last Maintenance Date</label>
                    <input type="date" id="maintenanceDate" name="maintenanceDate" />
                  </div>
                  <div class="form-group">
                    <label for="maintenanceDue">Next Maintenance Due</label>
                    <input type="date" id="maintenanceDue" name="maintenanceDue" />
                  </div>
                </div>

                <div class="form-group">
                  <label for="maintenanceInterval">Maintenance Interval</label>
                  <div class="interval-input">
                    <input
                      type="number"
                      id="maintenanceInterval"
                      name="maintenanceInterval"
                      min="1"
                      max="365"
                      value="6"
                    />
                    <select id="maintenanceIntervalType" name="maintenanceIntervalType">
                      <option value="days">Days</option>
                      <option value="weeks">Weeks</option>
                      <option value="months" selected>Months</option>
                    </select>
                  </div>
                </div>

                <!-- Maintenance Files -->
                <div class="file-upload-section">
                  <label>Maintenance Files</label>
                  <div class="file-upload-group">
                    <div class="file-upload">
                      <label for="maintenanceTemplate">Maintenance Template</label>
                      <input
                        type="file"
                        id="maintenanceTemplate"
                        name="maintenanceTemplate"
                        accept=".pdf,.doc,.docx,.xls,.xlsx"
                      />
                      <span class="file-info">Upload template form</span>
                    </div>
                    <div class="file-upload">
                      <label for="maintenanceInstructions">Maintenance Instructions</label>
                      <input
                        type="file"
                        id="maintenanceInstructions"
                        name="maintenanceInstructions"
                        accept=".pdf,.doc,.docx,.xls,.xlsx"
                      />
                      <span class="file-info">Upload procedure</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Additional Information -->
            <div class="form-section">
              <h3>Additional Information</h3>
              <div class="form-group">
                <label for="notes">Notes</label>
                <textarea
                  id="notes"
                  name="notes"
                  rows="3"
                  placeholder="Additional notes about this item..."
                ></textarea>
              </div>
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="cancelAddItem">Cancel</button>
            <button type="submit" class="btn-primary">
              <span class="btn-text">Add Item</span>
              <div class="btn-loader" style="display: none">
                <div class="spinner"></div>
              </div>
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Item Detail Modal -->
    <div class="modal-overlay" id="itemDetailModal">
      <div class="modal-content large">
        <div class="modal-header">
          <h2 id="itemDetailTitle">Item Details</h2>
          <button class="modal-close" id="closeItemDetailModal">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="item-detail-content" id="itemDetailContent">
          <!-- Item details will be populated here -->
        </div>
      </div>
    </div>

    <!-- Upload Record Modal -->
    <div id="uploadModal" class="modal-overlay">
      <!-- Modal content will be dynamically generated -->
    </div>

    <!-- Create List Modal -->
    <div id="createListModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create New List</h2>
          <button class="modal-close" onclick="hideCreateListModal()">✕</button>
        </div>
        <div class="modal-body">
          <form id="createListForm">
            <div class="form-group">
              <label for="listName">List Name</label>
              <input
                type="text"
                id="listName"
                name="listName"
                required
                placeholder="Enter list name"
              />
            </div>

            <div class="form-group">
              <label>List Color</label>
              <div class="color-selection">
                <div class="color-presets">
                  <div class="theme-selector">
                    <label>Theme:</label>
                    <select id="colorTheme" onchange="switchColorTheme()">
                      <option value="dark">Dark Theme (Grey/Black)</option>
                      <option value="light" selected>Light Theme</option>
                      <option value="purple">Purple Theme</option>
                    </select>
                  </div>
                  <h4>Preset Colors</h4>
                  <div class="color-grid" id="colorGrid">
                    <!-- Colors will be populated by JavaScript based on theme -->
                  </div>
                </div>

                <div class="color-custom">
                  <h4>Custom Color</h4>
                  <div class="color-inputs">
                    <div class="color-input-group">
                      <label for="customColor">Background Color</label>
                      <input type="color" id="customColor" name="customColor" value="#6b7280" />
                    </div>
                    <div class="color-input-group">
                      <label for="customTextColor" class="visually-hidden"
                        >Text Color (Auto-generated)</label
                      >
                      <input
                        type="hidden"
                        id="customTextColor"
                        name="customTextColor"
                        value="#ffffff"
                      />
                      <div class="auto-text-color-info">
                        <small>Text color will be automatically chosen for optimal contrast</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="modal-actions">
              <button type="button" class="btn-secondary" onclick="hideCreateListModal()">
                Cancel
              </button>
              <button type="submit" class="btn-primary">Create List</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Edit List Modal -->
    <div id="editListModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Edit List</h2>
          <button class="modal-close" onclick="hideEditListModal()">✕</button>
        </div>
        <div class="modal-body">
          <form id="editListForm">
            <input type="hidden" id="editListId" name="editListId" />
            <div class="form-group">
              <label for="editListName">List Name</label>
              <input
                type="text"
                id="editListName"
                name="editListName"
                required
                placeholder="Enter list name"
              />
            </div>

            <div class="form-group">
              <label>List Color</label>
              <div class="color-selection">
                <div class="color-presets">
                  <div class="theme-selector">
                    <label>Theme:</label>
                    <select id="editColorTheme" onchange="switchEditColorTheme()">
                      <option value="dark">Dark Theme (Grey/Black)</option>
                      <option value="light" selected>Light Theme</option>
                      <option value="purple">Purple Theme</option>
                    </select>
                  </div>
                  <h4>Preset Colors</h4>
                  <div class="color-grid" id="editColorGrid">
                    <!-- Colors will be populated by JavaScript based on theme -->
                  </div>
                </div>

                <div class="color-custom">
                  <h4>Custom Color</h4>
                  <div class="color-inputs">
                    <div class="color-input-group">
                      <label for="editCustomColor">Background Color</label>
                      <input
                        type="color"
                        id="editCustomColor"
                        name="editCustomColor"
                        value="#6b7280"
                      />
                    </div>
                    <div class="color-input-group">
                      <label for="editCustomTextColor" class="visually-hidden"
                        >Text Color (Auto-generated)</label
                      >
                      <input
                        type="hidden"
                        id="editCustomTextColor"
                        name="editCustomTextColor"
                        value="#ffffff"
                      />
                      <div class="auto-text-color-info">
                        <small>Text color will be automatically chosen for optimal contrast</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="modal-actions">
              <button type="button" class="btn-secondary" onclick="hideEditListModal()">
                Cancel
              </button>
              <button type="submit" class="btn-primary">Update List</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Mark Out of Service modal -->
    <div id="modal-oos" class="modal hidden">
      <div class="modal-card">
        <h3>Mark Out of Service</h3>
        <form id="form-oos">
          <input type="hidden" id="oos-item-id" />
          <label class="block text-sm mt-2">Reason <span class="text-red-400">*</span></label>
          <input id="oos-reason" class="input" required maxlength="200" />
          <label class="block text-sm mt-3">Notes (optional)</label>
          <textarea id="oos-notes" class="textarea" maxlength="500"></textarea>
          <div class="flex justify-end gap-2 mt-4">
            <button type="button" class="btn btn-ghost" data-close="modal-oos">Cancel</button>
            <button type="submit" class="btn btn-danger">Mark OOS</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Return to Service modal -->
    <div id="modal-rts" class="modal hidden">
      <div class="modal-card">
        <h3>Return to Service</h3>
        <form id="form-rts">
          <input type="hidden" id="rts-item-id" />
          <label class="block text-sm mt-2">Notes (optional)</label>
          <textarea id="rts-notes" class="textarea" maxlength="500"></textarea>
          <div class="flex justify-end gap-2 mt-4">
            <button type="button" class="btn btn-ghost" data-close="modal-rts">Cancel</button>
            <button type="submit" class="btn btn-primary">Return to Service</button>
          </div>
        </form>
      </div>
    </div>

    <script src="/app.js?v=oos-ui-2"></script>
  </body>
</html>
